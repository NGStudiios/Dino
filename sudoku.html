<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sudoku NGS Games</title>
<style>
body {
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: #222;
  color: #fff;
}
#controls {
  margin: 10px;
}
select, button {
  font-size: 1em;
  padding: 5px 10px;
  margin: 5px;
}
#sudokuGrid {
  border-collapse: collapse;
}
#sudokuGrid td {
  width: 50px;
  height: 50px;
  text-align: center;
  vertical-align: middle;
  font-size: 24px;
  border: 1px solid #fff;
  background-color: #333;
  color: #fff;
}
#sudokuGrid td.fixed {
  font-weight: bold;
  background-color: #555;
}
#sudokuGrid td.error {
  background-color: #b00;
  color: #fff;
}
#score {
  margin: 10px;
  font-size: 18px;
}
</style>
</head>
<body>

<h1>Sudoku NGS Games</h1>

<div id="controls">
  <label for="difficulty">Dificultad:</label>
  <select id="difficulty">
    <option value="veryeasy">Muy Fácil</option>
    <option value="easy">Fácil</option>
    <option value="medium">Difícil</option>
    <option value="hard">Muy Difícil</option>
    <option value="impossible">Imposible</option>
  </select>
  <button id="newGame">Nuevo Juego</button>
</div>

<div id="score">Errores: 0 / 3</div>

<table id="sudokuGrid"></table>

<script>
const GRID_SIZE = 9;
let maxErrors = 3;
let currentErrors = 0;
let solution = [];
let userGrid = [];

const difficultyLevels = {
  veryeasy: 45,
  easy: 35,
  medium: 25,
  hard: 18,
  impossible: 10
};

function generateEmptyGrid(){
  const grid = [];
  for(let i=0;i<GRID_SIZE;i++){
    grid.push(Array(GRID_SIZE).fill(0));
  }
  return grid;
}

// Función para generar un Sudoku (muy simple placeholder, se puede mejorar)
function generateSudoku(level){
  let grid = generateEmptyGrid();
  solution = generateEmptyGrid();
  // rellenar diagonal de bloques para simplificar
  for(let block=0;block<GRID_SIZE;block+=3){
    for(let i=0;i<3;i++){
      for(let j=0;j<3;j++){
        let num = Math.floor(Math.random()*9)+1;
        grid[block+i][block+j]=num;
        solution[block+i][block+j]=num;
      }
    }
  }
  // Borrar números según dificultad
  let toRemove = 81 - difficultyLevels[level];
  while(toRemove>0){
    let x = Math.floor(Math.random()*9);
    let y = Math.floor(Math.random()*9);
    if(grid[y][x]!==0){
      grid[y][x]=0;
      toRemove--;
    }
  }
  userGrid = JSON.parse(JSON.stringify(grid));
  return grid;
}

function drawGrid(){
  const table = document.getElementById("sudokuGrid");
  table.innerHTML = '';
  for(let i=0;i<GRID_SIZE;i++){
    const row = document.createElement("tr");
    for(let j=0;j<GRID_SIZE;j++){
      const cell = document.createElement("td");
      if(userGrid[i][j]!==0){
        cell.textContent = userGrid[i][j];
        cell.classList.add("fixed");
      } else {
        const input = document.createElement("input");
        input.type="number";
        input.min=1;
        input.max=9;
        input.style.width="100%";
        input.style.height="100%";
        input.style.fontSize="24px";
        input.style.backgroundColor="#333";
        input.style.color="#fff";
        input.addEventListener("input",(e)=>{
          const val = parseInt(e.target.value);
          if(val===solution[i][j]){
            userGrid[i][j]=val;
            e.target.parentElement.classList.remove("error");
          } else if(val){
            userGrid[i][j]=val;
            e.target.parentElement.classList.add("error");
            currentErrors++;
            if(currentErrors>=maxErrors){
              alert("Has alcanzado el máximo de errores!");
              startGame();
            }
            document.getElementById("score").textContent = `Errores: ${currentErrors} / ${maxErrors}`;
          }
          if(val===0 || e.target.value===""){
            userGrid[i][j]=0;
            e.target.parentElement.classList.remove("error");
          }
        });
        cell.appendChild(input);
      }
      row.appendChild(cell);
    }
    table.appendChild(row);
  }
}

function startGame(){
  currentErrors = 0;
  const level = document.getElementById("difficulty").value;
  maxErrors = 3; // Podés ajustar por dificultad si quieres
  userGrid = generateSudoku(level);
  drawGrid();
  document.getElementById("score").textContent = `Errores: ${currentErrors} / ${maxErrors}`;
}

document.getElementById("newGame").addEventListener("click",startGame);

startGame();
</script>

</body>
</html>
