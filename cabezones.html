<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cabezones de Fútbol</title>
<style>
body {
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#4CAF50; /* césped */
  overflow:hidden;
}
canvas {
  display:block;
  margin:0 auto;
  background:#4CAF50;
  border:3px solid #00e5ff;
}
.scoreboard {
  text-align:center;
  color:#fff;
  font-size:1.5em;
  margin:5px 0;
  text-shadow: 0 0 5px #000;
}
</style>
</head>
<body>
<div class="scoreboard">
  Jugador 1: <span id="score1">0</span> | Jugador 2: <span id="score2">0</span>
</div>
<canvas id="gameCanvas" width="800" height="400"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let score1 = 0;
let score2 = 0;

const score1El = document.getElementById('score1');
const score2El = document.getElementById('score2');

// Jugadores
const player1 = {x: 50, y: 180, width:60, height:60, color:'#ff4444', speed:5};
const player2 = {x: 690, y: 180, width:60, height:60, color:'#4444ff', speed:5};

// Pelota
const ball = {x: 390, y: 190, radius:15, vx:4, vy:3, color:'#fff'};

// Controles
const keys = {};

// Porterías
const goalWidth = 10;
const goalHeight = 120;

function drawPlayers(){
  ctx.fillStyle = player1.color;
  ctx.fillRect(player1.x, player1.y, player1.width, player1.height);

  ctx.fillStyle = player2.color;
  ctx.fillRect(player2.x, player2.y, player2.width, player2.height);
}

function drawBall(){
  ctx.fillStyle = ball.color;
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
  ctx.fill();
}

function movePlayers(){
  // Player 1: flechas
  if(keys['ArrowUp'] && player1.y>0) player1.y -= player1.speed;
  if(keys['ArrowDown'] && player1.y + player1.height < canvas.height) player1.y += player1.speed;
  if(keys['ArrowLeft'] && player1.x>0) player1.x -= player1.speed;
  if(keys['ArrowRight'] && player1.x + player1.width < canvas.width/2) player1.x += player1.speed;

  // Player 2: WASD
  if(keys['w'] && player2.y>0) player2.y -= player2.speed;
  if(keys['s'] && player2.y + player2.height < canvas.height) player2.y += player2.speed;
  if(keys['a'] && player2.x>canvas.width/2) player2.x -= player2.speed;
  if(keys['d'] && player2.x + player2.width < canvas.width) player2.x += player2.speed;
}

function moveBall(){
  ball.x += ball.vx;
  ball.y += ball.vy;

  // Rebote con suelo y techo
  if(ball.y - ball.radius <0 || ball.y + ball.radius > canvas.height){
    ball.vy = -ball.vy;
  }

  // Rebote con jugadores
  if(ball.x - ball.radius < player1.x + player1.width &&
     ball.x + ball.radius > player1.x &&
     ball.y + ball.radius > player1.y &&
     ball.y - ball.radius < player1.y + player1.height){
       ball.vx = Math.abs(ball.vx);
  }

  if(ball.x - ball.radius < player2.x + player2.width &&
     ball.x + ball.radius > player2.x &&
     ball.y + ball.radius > player2.y &&
     ball.y - ball.radius < player2.y + player2.height){
       ball.vx = -Math.abs(ball.vx);
  }

  // Goles
  if(ball.x - ball.radius <0){
    score2++;
    score2El.innerText = score2;
    resetBall();
  }
  if(ball.x + ball.radius > canvas.width){
    score1++;
    score1El.innerText = score1;
    resetBall();
  }
}

function resetBall(){
  ball.x = canvas.width/2;
  ball.y = canvas.height/2;
  ball.vx = (Math.random()>0.5?4:-4);
  ball.vy = (Math.random()*4-2);
}

function drawGoals(){
  ctx.fillStyle = '#fff';
  // Portería izquierda
  ctx.fillRect(0, canvas.height/2 - goalHeight/2, goalWidth, goalHeight);
  // Portería derecha
  ctx.fillRect(canvas.width - goalWidth, canvas.height/2 - goalHeight/2, goalWidth, goalHeight);
}

function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Fondo césped
  ctx.fillStyle = '#4CAF50';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  drawGoals();
  drawPlayers();
  drawBall();
  movePlayers();
  moveBall();

  requestAnimationFrame(update);
}

// Controles
document.addEventListener('keydown', e => keys[e.key]=true);
document.addEventListener('keyup', e => keys[e.key]=false);

update();
</script>
</body>
</html>
